/* Grid Cells */
@mixin create-cells($columns: 12, $mobile-1st-bps: null) {
  @for $i from 1 through $columns {
    $column-width: percentage($i / $columns);

    .cell--#{$i}-col {
      flex-basis: $column-width;
      max-width: $column-width;
    }
  }

  @each $bp-name, $bp-size in $mobile-1st-bps {
    @media (min-width: $bp-size) {
      @for $i from 1 through $columns {
        $column-width: percentage($i / $columns);

        .cell--#{$i}-col-#{$bp-name} {
          flex-basis: $column-width;
          max-width: $column-width;
        }
      }
    }
  }

  @media (min-width: 0) and (max-width: $screen-small) {
    .cell--0-col-small {
      display: none;
    }
  }

  @media (min-width: $screen-small) and (max-width: $screen-medium) {
    .cell--0-col-medium {
      display: none;
    }
  }

  @media (min-width: $screen-medium) and (max-width: $screen-large) {
    .cell--0-col-large {
      display: none;
    }
  }

  @media (min-width: $screen-large) {
    .cell--0-col-large {
      display: none;
    }
  }
}

// Grid Alignment
@mixin row-alignment ($position, $breakpoints) {
  @each $bp-size, $name in $breakpoints {
    $bp-position: $position + '-' + $name;

    .grid-row--align-#{$bp-position} {
      @include breakpoint($bp-size) {
        @content;
      }
    }
  }

  .grid-row--align-#{$position} {
    @content;
  }
}

// Cell Alignment
@mixin cell-alignment ($position, $breakpoints) {
  @each $bp-size, $name in $breakpoints {
    $bp-position: $position + '-' + $name;

    .cell--align-#{$bp-position} {
      @include breakpoint($bp-size) {
        @content;
      }
    }
  }

  .cell--align-#{$position} {
    @content;
  }
}

.container {
  @include breakpoint($screen-small) {
    max-width: $container-width-small;
  }

  @include breakpoint($screen-medium) {
    max-width: $container-width-medium;
  }

  @include breakpoint($screen-large) {
    max-width: $container-width-large;
  }
  display: block;
  margin: 0 auto;
  padding: 0 $grid-gutter / 2;
}

.grid-row {
  display: flex;
  flex: 0 1 100%;
  flex-wrap: wrap;
  margin: 0 (-$grid-gutter / 2);
}

.cell {
  @include breakpoint($screen-small) {
    flex-basis: 0;
  }
  flex: 1 1 100%;
  max-width: 100%;
  padding-left: $grid-gutter / 2;
  padding-right: $grid-gutter / 2;
}

.cell--height-stretch {
  display: flex;
  /* Stylelint does not like this, and we should always stay away from global
  selectors where possible */
  /* stylelint-disable-next-line selector-no-universal, selector-no-combinator, scss/selector-no-redundant-nesting-selector */
  & > * {
    flex: 1;
  }
}

@include create-cells($grid-columns, (
  extra-small: $screen-extra-small,
  small: $screen-small,
  medium: $screen-medium,
  large: $screen-large)
);

// Row Horizontal Alignment
@include row-alignment('left', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  justify-content: flex-start;
}

@include row-alignment('right', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  justify-content: flex-end;
}

@include row-alignment('center', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  justify-content: center;
}

// Row Vertical Alignment
@include row-alignment('top', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  align-items: flex-start;
}

@include row-alignment('bottom', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  align-items: flex-end;
}

@include row-alignment('middle', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  align-items: center;
}

// Column Vertical Alignment
@include cell-alignment('top', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  align-self: flex-start;
}

@include cell-alignment('bottom', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  align-self: flex-end;
}

@include cell-alignment('middle', (
  ($screen-extra-small, 'extra-small'),
  ($screen-small, 'small'),
  ($screen-medium, 'medium'),
  ($screen-large, 'large'))
) {
  align-self: center;
}
