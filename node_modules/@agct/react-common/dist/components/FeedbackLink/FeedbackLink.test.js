(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(['react', 'chai', 'enzyme', 'chai-enzyme', 'sinon-chai', './FeedbackLink'], factory);
  } else if (typeof exports !== "undefined") {
    factory(require('react'), require('chai'), require('enzyme'), require('chai-enzyme'), require('sinon-chai'), require('./FeedbackLink'));
  } else {
    var mod = {
      exports: {}
    };
    factory(global.react, global.chai, global.enzyme, global.chaiEnzyme, global.sinonChai, global.FeedbackLink);
    global.FeedbackLinkTest = mod.exports;
  }
})(this, function (_react, _chai, _enzyme, _chaiEnzyme, _sinonChai, _FeedbackLink) {
  'use strict';

  var _react2 = _interopRequireDefault(_react);

  var _chai2 = _interopRequireDefault(_chai);

  var _chaiEnzyme2 = _interopRequireDefault(_chaiEnzyme);

  var _sinonChai2 = _interopRequireDefault(_sinonChai);

  var _FeedbackLink2 = _interopRequireDefault(_FeedbackLink);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
      default: obj
    };
  }

  _chai2.default.use((0, _chaiEnzyme2.default)());
  _chai2.default.use(_sinonChai2.default);

  var userAgent = 'Chrome/53.0.2785.143';
  var appName = 'Test App';
  var username = 'testuser';
  var preventDefaultEvent = {
    preventDefault: function preventDefault() {}
  };
  var date = new Date();
  var url = 'http://allangray.co.za';
  var emailLink = 'mailto:icebreakersfeedback@allangray.co.za?Subject=[Test App Feedback]\n    &body=%0A-------------------------------------------------------%0AYour feedback is greatly appreciated.%0AIf you are experiencing a problem or have a suggestion, please be as specific as possible and include a screenshot where necessary.%0A%0ATechnical Data:%0Auser-agent: Chrome/53.0.2785.143 url: ' + url + ' screen-resolution: 0x0 username: testuser timestamp: ' + date;

  describe('FeedbackLink component', function () {
    var wrapper = void 0;

    beforeEach(function () {
      wrapper = (0, _enzyme.shallow)(_react2.default.createElement(_FeedbackLink2.default, { app: appName, username: username, userAgent: userAgent, date: date, url: url }));
    });

    it('renders correctly', function () {
      (0, _chai.expect)(wrapper).to.have.className('nav-bar__items__item');
      (0, _chai.expect)(wrapper).to.have.text('Send us your Feedback');
    });

    it('prevent default click event when clicked', function () {
      var sandbox = sinon.sandbox.create();
      var spyClick = sandbox.spy(preventDefaultEvent, 'preventDefault');

      wrapper.simulate('click', preventDefaultEvent);
      (0, _chai.expect)(spyClick).to.have.been.calledOnce;
      sandbox.restore();
    });

    it('opens new window when clicked', function () {
      var sandbox = sinon.sandbox.create();
      var spyClick = sandbox.spy(window, 'open');

      wrapper.simulate('click', preventDefaultEvent);
      (0, _chai.expect)(spyClick).to.have.been.calledWith(emailLink, 'emailWindow');
      sandbox.restore();
    });
  });
});