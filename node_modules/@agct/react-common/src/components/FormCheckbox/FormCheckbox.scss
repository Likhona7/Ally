@import 'node_modules/@agct/ag-styleguide/src/base/scss/variables/colors';
@import 'node_modules/@agct/ag-styleguide/src/base/scss/variables/grid';

$checkbox-font-size: to-rem(16px) !default;
$checkbox-width: 1em !default;
$checkbox-height: 1em !default;
$checkbox-background-hover: $color-grey-lightest !default;
$checkbox-background-checked: $color-primary !default;
$checkbox-border-unchecked: $color-grey-light !default;
$checkbox-border-checked: $color-primary !default;
$checkbox-border-radius: to-rem(2px) !default;
$checkbox-border-width: to-rem(2px) !default;
$checkbox-margin-right: to-rem(5px) !default;

$checkbox-tick-width: 0.33333333em !default;
$checkbox-tick-height: 0.73333333em !default;
$checkbox-tick-border-width: to-rem(2px) !default;
$checkbox-tick-border-color: #fff !default;
$checkbox-tick-left-offset: 0.2em !default;
$checkbox-tick-top-offset: to-rem(-1px) !default;

.checkbox {
  display: flex;
  flex-wrap: wrap;
  font-size: $checkbox-font-size;
  line-height: 1;
  cursor: default;

  input[type='checkbox'] {
    opacity: 0;
    position: absolute;
    width: 0;
    height: 0;
  }

  input[type='checkbox']:focus,
  input[type='checkbox']:hover {
    + label {
      .checkbox__box {
        @include breakpoint($screen-small) {
          background: $checkbox-background-hover;
          transition: background 200ms;
        }
      }
    }
  }

  input[type='checkbox']:checked {
    + label {
      .checkbox__box {
        background: $checkbox-background-checked;
        border-color: $checkbox-border-checked;
        transition: background 200ms, border-color 200ms;

        &::after {
          transform: rotate(45deg) scale(1, 1);
          transition: transform 350ms 40ms cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
      }
    }
  }

  label {
    display: flex;
    flex-wrap: wrap;
  }

  &.is-checked {
    .checkbox__box {
      background: $checkbox-background-checked;
      border-color: $checkbox-border-checked;
      transition: background 200ms, border-color 200ms;

      &::after {
        transform: rotate(45deg) scale(1, 1);
        transition: transform 350ms 40ms cubic-bezier(0.68, -0.55, 0.27, 1.55);
      }
    }
  }
}

.checkbox__box {
  flex: 0 0 auto;
  position: relative;
  width: $checkbox-width;
  height: $checkbox-height;
  border-radius: $checkbox-border-radius;
  border: $checkbox-border-width solid $checkbox-border-unchecked;
  margin-right: $checkbox-margin-right;
  transition: background 200ms 40ms;

  &::after {
    content: '';
    width: $checkbox-tick-width;
    height: $checkbox-tick-height;
    display: block;
    position: absolute;
    border: $checkbox-tick-border-width solid $checkbox-tick-border-color;
    border-left: 0;
    border-top: 0;
    left: $checkbox-tick-left-offset;
    top: $checkbox-tick-top-offset;
    transform: rotate(45deg) scale(0, 0);
    transition: transform 350ms cubic-bezier(0.68, -0.55, 0.27, 1.55);
  }
}

.checkbox__label {
  flex: 1;
}
